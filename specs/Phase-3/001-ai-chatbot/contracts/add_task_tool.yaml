mcp_tool: add_task
version: 1.0.0
description: |
  Create a new task for the authenticated user.
  Use when user wants to add, create, remember, or note something.

parameters:
  type: object
  required:
    - user_id
    - title
  properties:
    user_id:
      type: integer
      minimum: 1
      description: ID of the user creating the task (from JWT token)
      example: 5
    title:
      type: string
      minLength: 1
      maxLength: 200
      description: Task title (what needs to be done)
      example: "Buy milk"
    description:
      type: string
      nullable: true
      maxLength: 10000
      description: Optional detailed description of the task
      example: "Get 2% milk from the grocery store"

returns:
  type: object
  required:
    - task_id
    - title
    - description
    - completed
    - created_at
  properties:
    task_id:
      type: integer
      description: Unique identifier for the created task
      example: 42
    title:
      type: string
      description: Task title (echoed from input)
      example: "Buy milk"
    description:
      type: string
      nullable: true
      description: Task description (echoed from input, null if not provided)
      example: "Get 2% milk from the grocery store"
    completed:
      type: boolean
      description: Completion status (always false for new tasks)
      example: false
    created_at:
      type: string
      format: date-time
      description: ISO 8601 timestamp of task creation
      example: "2025-12-30T12:00:00Z"

errors:
  - code: "USER_NOT_FOUND"
    message: "User not found"
    http_status: 404
    condition: "user_id does not exist in database"
  - code: "TITLE_REQUIRED"
    message: "Title is required"
    http_status: 422
    condition: "title is empty or missing"
  - code: "TITLE_TOO_LONG"
    message: "Title must be 200 characters or less"
    http_status: 422
    condition: "title length > 200"
  - code: "DESCRIPTION_TOO_LONG"
    message: "Description must be 10000 characters or less"
    http_status: 422
    condition: "description length > 10000"

examples:
  - name: "Add simple task"
    input:
      user_id: 5
      title: "Buy milk"
    output:
      task_id: 42
      title: "Buy milk"
      description: null
      completed: false
      created_at: "2025-12-30T12:00:00Z"

  - name: "Add task with description"
    input:
      user_id: 5
      title: "Finish quarterly report"
      description: "Complete Q4 2025 sales analysis and submit to management"
    output:
      task_id: 43
      title: "Finish quarterly report"
      description: "Complete Q4 2025 sales analysis and submit to management"
      completed: false
      created_at: "2025-12-30T12:05:00Z"

agent_usage:
  trigger_phrases:
    - "Add task"
    - "Create task"
    - "Remember to"
    - "I need to"
    - "Don't forget to"
    - "Make a note to"
  natural_language_examples:
    - user_input: "Add task to buy milk"
      extracted_parameters:
        title: "Buy milk"
        description: null
    - user_input: "Remember to call mom tomorrow"
      extracted_parameters:
        title: "Call mom tomorrow"
        description: null
    - user_input: "Add task: finish report with description: quarterly sales analysis"
      extracted_parameters:
        title: "Finish report"
        description: "Quarterly sales analysis"

validation:
  - rule: "user_id must be a positive integer"
    enforcement: "Parameter type validation"
  - rule: "title must not be empty"
    enforcement: "Application logic before INSERT"
  - rule: "title must be 1-200 characters"
    enforcement: "Database VARCHAR(200) + application validation"
  - rule: "description is optional"
    enforcement: "Nullable field"

security:
  - check: "user_id from parameters MUST match authenticated user from JWT"
    enforcement: "Endpoint-level JWT validation"
    consequence: "403 Forbidden if mismatch"
  - check: "SQL injection prevention"
    enforcement: "SQLModel parameterized queries"
    consequence: "Parameterized INSERT, no raw SQL"

performance:
  expected_execution_time: "<50ms"
  database_operations: 1
  operation_type: "INSERT INTO tasks"

idempotency: false
side_effects: "Creates new row in tasks table"
stateless: true
